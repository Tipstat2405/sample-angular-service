name: CI  

on:  
  push:  
    branches:  
      - main  
      - 'feature/*'  
  pull_request:  
    branches:  
      - main  

jobs:  
  build:  

    runs-on: ubuntu-latest  

    steps:  
      - name: Check out the repository  
        uses: actions/checkout@v2  

      - name: Set up Node.js  
        uses: actions/setup-node@v2  
        with:  
          node-version: '22.14.0' # Specify the Node.js version to match your project  

      - name: Cache Node modules  
        uses: actions/cache@v2  
        with:  
          path: ~/.npm  
          key: ${{ runner.os }}-npm-${{ hashFiles('**/package-lock.json') }}  
          restore-keys: |  
            ${{ runner.os }}-npm-  

      - name: Install Angular CLI  
        run: npm install -g @angular/cli  

      - name: Install dependencies  
        run: npm install

      - name: Build the application  
        run: ng build 

      - name: Run tests  
        run: ng test --watch=false  

      - name: Check for vulnerabilities  
        run: npm audit
